import Image from "next/image";
import DebugImage from "./debug.png";
import BannerImage from "./banner.png";
import { Box } from "@mantine/core";

<Box w={300}>
  <Image src={BannerImage} height={300} alt="GDB debugging in VSCode" />
</Box>

# Advanced ESP32 development with ESP-IDF + VSCode

### Has your project outgrown the Arduino IDE?

Many ESP32 projects start with the Arduino IDE, but as they grow more complex it can be difficult to work within a single sketch file. The Arduino IDE is efficient for bootstrapping projects
but is **not the best fit for more complicated ESP32 projects.**

VSCode is one of the most popular editors due to its performance + reliability,
support from Microsoft, and breadth of extensions. Additionally, the [arduino-esp32](https://github.com/espressif/arduino-esp32)
library is an abstraction on top of the [ESP-IDF](https://github.com/espressif/esp-idf) development framework, restricting
your ability to use the Espressif frameworks available for your device.

For these reasons, the [Bitclock](https://github.com/goat-hill/bitclock) project uses ESP-IDF and VSCode directly.
With it, you get everything you'd expect from a full fledged development environment:

- Multiple source files
- Multiple build targets
- Code completion
- Interactive debugging

### Getting started with ESP-IDF

Once you leave the Arduino IDE, you are no longer tied to using the Arduino language and [arduino-esp32](https://github.com/espressif/arduino-esp32) build environment. While there are some advantages
to using an abstract SDK that can port to multiple board types, many applications will get more benefits from using the [ESP-IDF](https://github.com/espressif/esp-idf) framework directly and optimizing
for their selected board.

The ESP-IDF framework is packed with features and is extremely well documented. Some features you may want to use include:

- [freertos](https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/system/freertos.html) - Multi-threading and better display performance
- [esp_http_client](https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/protocols/esp_http_client.html) - Networking
- [bt](https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/bluetooth/index.html) - Bluetooth + BLE applications
- [ota](https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-reference/system/ota.html) - OTA firmware updates via Wi-Fi or bluetooth
- [partitions](https://docs.espressif.com/projects/esp-idf/en/stable/esp32/api-guides/partition-tables.html) - For custom layouts of flash memory

The [Bitclock](https://github.com/goat-hill/bitclock) project uses

### Code completion and debugging

```json
{
  "env": {
    "esp-version": "esp-13.2.0_20230928"
  },
  "configurations": [
    {
      "name": "esp32s3",
      "compilerPath": "${HOME}/.espressif/tools/xtensa-esp-elf/${esp-version}/xtensa-esp-elf/bin/xtensa-esp-elf-gcc",
      "compileCommands": "${workspaceFolder}/build/compile_commands.json",
      "includePath": [
        "${HOME}/.espressif/tools/xtensa-esp-elf/${esp-version}/xtensa-esp-elf/xtensa-esp-elf/include/**",
        "${HOME}/code/esp-idf/components/**",
        "${workspaceFolder}/**"
      ],
      "browse": {
        "path": [
          "${HOME}/.espressif/tools/xtensa-esp-elf/${esp-version}/xtensa-esp-elf/xtensa-esp-elf/include/**",
          "${HOME}/code/esp-idf/components/**",
          "${workspaceFolder}/**"
        ],
        "limitSymbolsToIncludedHeaders": false
      },
      "defines": ["BOARD_TARGET=2"]
    }
  ],
  "version": 4
}
```

### Supporting multiple board targets

### Custom PCB design tips
